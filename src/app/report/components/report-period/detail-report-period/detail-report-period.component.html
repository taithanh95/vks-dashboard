<form [formGroup]="formData">
  <div class="row">
    <div class="col-md-7 col-sm-12">
      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="reportCode">
          Báo cáo <span class="font-weight-bold text-danger">(*)</span>
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9" [nzErrorTip]="reportErrorTpl">
          <nz-select formControlName="reportCode"
                     nzPlaceHolder="Chọn biểu thống kê"
                     nzAllowClear
                     id="reportCode"
                     (ngModelChange)="onReportChange($event)"
                     [nzDropdownRender]="renderTemplate">
            <nz-option *ngFor="let o of lstReportCode" [nzValue]="o.key" [nzLabel]="o.value"></nz-option>
          </nz-select>
          <ng-template #reportErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">
              <small class="form-text">Vui lòng chọn Báo cáo!</small>
            </ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="fromDate">
          Từ ngày <span class="font-weight-bold text-danger">(*)</span>
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9" [nzErrorTip]="fromDateErrorTpl">
          <nz-date-picker class="form-control border-success w-100"
                          [nzAutoFocus]="true"
                          [nzMode]="'date'"
                          formControlName="fromDate"
                          [nzPlaceHolder]="'Chọn ngày'" nzFormat="dd/MM/yyyy"
                          id="fromDate"></nz-date-picker>
          <ng-template #fromDateErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">
              <small class="form-text">Vui lòng chọn Từ ngày!</small>
            </ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="toDate">
          Đến ngày <span class="font-weight-bold text-danger">(*)</span>
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9" [nzErrorTip]="toDateErrorTpl">
          <nz-date-picker class="form-control border-success w-100"
                          [nzMode]="'date'"
                          formControlName="toDate"
                          [nzPlaceHolder]="'Chọn ngày'" nzFormat="dd/MM/yyyy"
                          id="toDate"></nz-date-picker>
          <ng-template #toDateErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">
              <small class="form-text">Vui lòng chọn Đến ngày!</small>
            </ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="createdAt">
          Ngày báo cáo <span class="font-weight-bold text-danger">(*)</span>
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9" [nzErrorTip]="beginDateErrorTpl">
          <nz-date-picker class="form-control border-success w-100"
                          [nzMode]="'date'"
                          formControlName="createdAt"
                          [nzPlaceHolder]="'Chọn ngày'" nzFormat="dd/MM/yyyy"
                          id="createdAt"></nz-date-picker>
          <ng-template #beginDateErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">
              <small class="form-text">Vui lòng chọn Ngày báo cáo!</small>
            </ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <ng-container *ngIf="isCheck === '04' || isCheck === '10' || isCheck === '11' || isCheck === '12'" >
        <nz-form-item class="form-group row mb-0">
          <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="reportType">
            Kiểu báo cáo<span class="font-weight-bold text-danger">(*)</span>
          </nz-form-label>
          <nz-form-control class="col-lg-9 col-md-9">
            <nz-select formControlName="reportType"
                       nzPlaceHolder="Chọn kiểu báo cáo"
                       nzAllowClear
                       (ngModelChange)="onReportTypeChange($event)"
                       [nzDropdownRender]="renderTemplate">
              <nz-option [nzValue]="'2'" [nzLabel]="'Liệt kê theo đơn vị'"></nz-option>
              <nz-option [nzValue]="'1'" [nzLabel]="'Liệt kê theo tội danh'"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <ng-container *ngIf="isCheckTypeReport === '1'" >
          <nz-form-item class="form-group row mb-0">
            <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="codeId">
              Tên bộ luật
            </nz-form-label>
            <nz-form-control class="col-lg-9 col-md-9">
              <nz-select formControlName="codeId"
                         nzAllowClear
                         nzPlaceHolder="Chọn tên bộ luật"
                         (ngModelChange)="onInputLawGroup()"
                         [nzDropdownRender]="renderTemplate">
                <nz-option [nzValue]="''" [nzLabel]="'Tất cả'"></nz-option>
                <nz-option [nzValue]="'06'" [nzLabel]="'BLHS2015'"></nz-option>
                <nz-option [nzValue]="'02'" [nzLabel]="'BLHS1999'"></nz-option>
                <nz-option [nzValue]="'05'" [nzLabel]="'BLHS1985'"></nz-option>

              </nz-select>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item class="form-group row mb-0">
            <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="groupId">
              Chương luật
            </nz-form-label>
            <nz-form-control class="col-lg-9 col-md-9" [nzErrorTip]="reportErrorTpl" style="width:1px;">
              <nz-select formControlName="groupId"
                         nzAllowClear
                         nzShowSearch
                         nzPlaceHolder="Chọn chương luật"
                         (ngModelChange)="onChangeInputLaw()"
                         [nzDropdownRender]="renderTemplate">
                <nz-option [nzValue]="''" [nzLabel]="'Tất cả'"></nz-option>
                <nz-option *ngFor="let option of lstLawGroup" [nzLabel]="option.GROUPNAME"
                           [nzValue]="option.GROUPID">{{ option.GROUPNAME }}</nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item class="form-group row mb-0">
            <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="lawId">
              Điều
            </nz-form-label>
            <nz-form-control class="col-lg-9 col-md-9" [nzErrorTip]="reportErrorTpl" style="width:1px;">
              <nz-select formControlName="lawId"
                         nzAllowClear
                         nzShowSearch
                         nzPlaceHolder="Chọn điều luật"
                         [nzDropdownRender]="renderTemplate"
                         (nzOnSearch)="onInputLaw($event)">
                <nz-option [nzValue]="''" [nzLabel]="'Tất cả'"></nz-option>
                <nz-option *ngFor="let option of lstLaw"
                           nzLabel="{{toLawOption(option)}}" [nzValue]="option.lawId">{{toLawOption(option)}}</nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </ng-container>
      </ng-container>
      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="paperType">
          Khổ giấy in
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9">
          <nz-select formControlName="paperType"
                     nzPlaceHolder="Chọn khổ giấy in"
                     nzAllowClear
                     id="paperType"
                     [nzDropdownRender]="renderTemplate">
            <nz-option [nzValue]="'A3'" [nzLabel]="'A3'"></nz-option>
            <nz-option [nzValue]="'A4'" [nzLabel]="'A4'"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="createdBy">
          Người lập
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9">
          <input type="text" id="createdBy" name="createdBy" class="form-control border-success"
                 placeholder="Người lập" formControlName="createdBy">
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="leader">
          Lãnh đạo
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9">
          <input type="text" id="position" name="position" class="form-control border-success"
                 placeholder="Lãnh đạo" formControlName="position">
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="form-group row mb-0">
        <nz-form-label class="col-lg-3 col-md-3 col-form-label text-left" nzFor="signature">
          Ký tên
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9">
          <input type="text" id="signature" name="signature" class="form-control border-success"
                 placeholder="Ký tên" formControlName="signature">
        </nz-form-control>
      </nz-form-item>
    </div>
    <!--    <div class="col-md-5 col-sm-12">-->
    <!--      <nz-form-item class="form-group row mb-0">-->
    <!--        <nz-form-label class="text-left" nzFor="sppId">-->
    <!--          Chọn đơn vị <span class="font-weight-bold text-danger">(*)</span>-->
    <!--        </nz-form-label>-->
    <!--        <nz-form-control class="w-100">-->
    <!--          <nz-spin nzTip="Đang lấy dữ liệu đơn vị..." [nzSpinning]="isLoading">-->
    <!--            <ngx-treeview id="sppId" [config]="configTreeView" [items]="lstVKS">-->
    <!--            </ngx-treeview>-->
    <!--            <ng-container *ngIf="formData.dirty && formData.touched && formData.get('sppIdList').hasError('required')">-->
    <!--              <small class="text-danger">Vui lòng chọn Đơn vị!</small>-->
    <!--            </ng-container>-->
    <!--          </nz-spin>-->
    <!--        </nz-form-control>-->
    <!--      </nz-form-item>-->
    <!--    </div>-->
    <!--  </div>-->
    <div class="col-md-5 col-sm-9">
      <nz-form-item class="form-group row mb-0 ant-row ant-form-item">
        <nz-form-label class="text-left ant-form-item-label ant-col" nzFor="option">
          Lựa chọn đơn vị xem báo cáo
        </nz-form-label>
        <nz-form-control class="col-lg-9 col-md-9">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="option" id="radio1" value='1' checked formControlName="option" (ngModelChange)="isCheckOption($event)">
            <label class="form-check-label" for="radio1">
              Tổng hợp số liệu của VKS hiện tại
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="option" id="radio2" value='2' checked formControlName="option" (ngModelChange)="isCheckOption($event)">
            <label class="form-check-label" for="radio2">
              Tổng hợp số liệu của VKS cấp trực thuộc
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="option" id="radio3" value='3' formControlName="option" (ngModelChange)="isCheckOption($event)">
            <label class="form-check-label" for="radio3">
              Tổng hợp số liệu của VKS hiện tại và các VKS cấp trực thuộc
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="option" id="radio4" value='4' formControlName="option" (ngModelChange)="isCheckOption($event)">
            <label class="form-check-label" for="radio4">
              Tùy chọn tổng hợp số liệu từ các VKS
            </label>
          </div>
        </nz-form-control>
      </nz-form-item>

      <ng-container *ngIf="isVisibleSPP">
        <nz-form-item class="form-group row mb-0">
          <nz-form-label class="text-left" nzFor="sppId">
            Chọn đơn vị <span class="font-weight-bold text-danger">(*)</span>
          </nz-form-label>
          <nz-form-control class="w-100">
            <nz-spin nzTip="Đang lấy dữ liệu đơn vị..." [nzSpinning]="isLoading">
              <ngx-treeview id="sppId" [config]="configTreeView" [items]="lstVKS" (filterChange)="onFilterChange($event)"
                            (selectedChange)="selectedChange()">
              </ngx-treeview>
              <ng-container *ngIf="formData.get('sppIdList').hasError('required')">
                <small class="text-danger">Vui lòng chọn Đơn vị</small>
              </ng-container>
            </nz-spin>
          </nz-form-control>
        </nz-form-item>
      </ng-container>
    </div>
  </div>
</form>

<ng-template #renderTemplate>
  <nz-spin *ngIf="isLoading"></nz-spin>
</ng-template>
